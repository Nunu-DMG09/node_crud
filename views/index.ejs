<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Películas · Movietime</title>
  <style>
    :root{
      --bg:#f7fafc; --card:#ffffff; --muted:#6b7280;
      --brand-start:#2563eb; --brand-end:#7c3aed;
      --glass: rgba(15,23,42,0.04);
      --radius:12px; --shadow: 0 6px 20px rgba(2,6,23,0.08);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg) 0%, #eef2f7 100%);color:#0f172a;}
    .wrap{max-width:1100px;margin:32px auto;padding:20px;}
    .navbar{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-radius:10px;background:linear-gradient(90deg,var(--brand-start),var(--brand-end));box-shadow:var(--shadow);color:#fff}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;font-weight:700}
    .navlinks a{color:rgba(255,255,255,0.95);margin-left:14px;text-decoration:none;font-weight:600}
    .header{display:flex;align-items:center;justify-content:space-between;margin:22px 0}
    .title{font-size:28px;font-weight:700;color:#0b1220}
    .subtitle{color:var(--muted);margin-top:4px;font-size:13px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:linear-gradient(90deg,var(--brand-start),var(--brand-end));color:#fff;box-shadow:0 8px 20px rgba(37,99,235,0.14)}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;border:1px solid var(--glass)}
    .table-wrap{overflow:auto}
    table{width:100%;border-collapse:collapse;font-size:14px}
    thead th{background:#fafafa;text-align:left;padding:14px;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.6px}
    tbody td{padding:14px;border-top:1px solid #f1f5f9;color:#0b1220}
    .id-badge{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:8px;background:#f1f5f9;color:#0b1220;font-weight:700}
    .meta{font-size:13px;color:var(--muted)}
    .actions a{margin-left:8px;padding:8px 10px;border-radius:8px;text-decoration:none;font-weight:600;color:#0b1220;background:#f8fafc;border:1px solid #eef2ff}
    .actions a.danger{background:#fff6f6;color:#b91c1c;border-color:#fee2e2}
    .empty{padding:48px;text-align:center;color:var(--muted)}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
    @media (max-width:720px){ .header{flex-direction:column;align-items:flex-start;gap:12px} thead{display:none} tbody td{display:block;padding:12px} tbody tr{border-bottom:1px solid #f1f5f9;margin-bottom:10px} .actions{display:flex;gap:8px;margin-top:8px} }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="navbar">
      <div class="brand">
        <div class="logo">MT</div>
        <div>
          <div style="font-weight:800">Movietime</div>
          <div style="font-size:12px;opacity:.9">Gestión de películas</div>
        </div>
      </div>
      <nav class="navlinks">
        <a href="/" class="nav-link">Inicio</a>
        <a href="/create" class="nav-link">Crear</a>
      </nav>
    </header>

    <div class="header">
      <div>
        <div class="title">Catálogo de películas</div>
        <div class="subtitle">Administra tu colección — agregar, editar y eliminar</div>
      </div>
      <div>
        <a href="/create" class="btn btn-primary">+ Nueva película</a>
      </div>
    </div>

    <div class="card">
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th style="width:70px">ID</th>
              <th>Título</th>
              <th style="width:160px">Duración</th>
              <th style="width:120px">Estreno</th>
              <th style="width:170px">Creado</th>
              <th style="width:170px;text-align:right">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <% if (peliculas && peliculas.length) { %>
              <% peliculas.forEach(p => { %>
                <tr>
                  <td><div class="id-badge"><%= p.id %></div></td>
                  <td>
                    <div style="font-weight:700"><%= p.titulo %></div>
                    <div class="meta"><%= p.estreno %> · <%= p.duracion %> min</div>
                  </td>
                  <td class="meta"><%= p.duracion %> min</td>
                  <td class="meta"><%= p.estreno %></td>
                  <td class="meta"><%= p.creado?.toISOString ? p.creado.toISOString().slice(0,19).replace('T',' ') : p.creado %></td>
                  <td class="actions" style="text-align:right">
                    <a href="/edit/<%= p.id %>">Editar</a>
                    <a href="/delete/<%= p.id %>" class="danger" onclick="return confirm('¿Eliminar esta película?')">Eliminar</a>
                  </td>
                </tr>
              <% }) %>
            <% } else { %>
              <tr><td colspan="6" class="empty">
                <div style="font-size:18px;font-weight:700;color:#111827">No hay películas</div>
                <div style="margin-top:8px;color:var(--muted)">Comienza agregando la primera película</div>
                <div style="margin-top:12px"><a href="/create" class="btn btn-primary">Crear película</a></div>
              </td></tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>

    <footer>© <%= new Date().getFullYear() %> Movietime</footer>
  </div>
</body>
</html>